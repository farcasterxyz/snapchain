# Migrating to Snapchain

If you are currently running a hubble instance,

- first, start by also running a snapchain node. See instructions [here](/guides/running-a-node).
- then, update your app to use `hub-nodejs` version `>=0.13.0` which supports snapchain
- finally, snapchain apis are drop in replacements for hub apis, you just need to update the app to use the snapchain host and port

### Notable differences when building a client
- The default ports are different. The default HTTP port is `3381` and the default GRPC port is `3383`.
- `submitMessage` requests must all contain `dataBytes` for Snapchain. The `hub-nodejs` builders handle this in all versions `>=0.13.0`, but if you're not using those you will need to manually update this like so:
    ```typescript
    if (message.dataBytes === undefined) {
        message.dataBytes = protobufs.MessageData.encode(message.data).finish();
        message.data = undefined;
    }
    ```
- `submitMessage` is best-effort. It's possible, but rare, that `submitMessage` succeeds but the submitted message fails to get included in a block.
- When calling `subscribe` or using shuttle, note that there are only 2 shards on snapchain and they are 1 indexed (shard 0 is chain metadata and does not have user data)
- HubEvent ids don't contain timestamps, if you are using `extractEventTimestamp` it may return nonsensical values.

### Notable differences when running a node 
- Calling `http://localhost:3381/v1/info` and monitoring `blockDelay` is the best way to check if your node is caught up. The `blockDelay` field represents the exact number of seconds the node is behind the latest block.
- Nodes store all blocks by default currently. But you can modify the config to enable pruning of blocks to save space.